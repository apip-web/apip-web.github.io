<style>
#theme-switcher {
  color: var(--text-main);
  text-decoration: none;
  font-size: 28px;
  font-weight: 700;
  letter-spacing: 3px;
  text-transform: uppercase;
  transition: all 0.3s ease;
}

#theme-switcher:hover {
  color: var(--accent);
  transform: translateY(-3px);
}
</style>

<nav id="navbar">
        <div class="nav-container">
            <a href="/" class="logo-link">
                <svg class="logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#000;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#ff3366;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <polygon points="50,10 20,50 50,90 80,50" fill="none" stroke="url(#logoGrad)" stroke-width="3"/>
                    <circle cx="50" cy="50" r="5" fill="url(#logoGrad)"/>
                </svg>
                <span class="logo-text">NOIR</span>
            </a>

            <div class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <div class="mobile-nav" id="mobileNav">
        <ul class="mobile-nav-links">
            <li><a href="/">Home</a></li>
            <li><span id="theme-switcher">Switch Theme</span></li>
            <li><span id="toggle-debug">Show <code>Debug</code></span></li>
            <li><a href="/page/about/">About</a></li>
        </ul>
    </div> 

<div id="themeModal" class="modal">
    <div class="modal-content">
        <h3 style="margin-bottom: 10px;">Appearance</h3>
        <p style="font-size: 14px; color: var(--text-muted);">Pilih tema tampilan website</p>
        <div class="theme-options">
            <button class="theme-btn" onclick="setTheme('light')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="1.5"></circle>
            <path d="M12 2V4M12 20V22M4 12L2 12M22 12L20 12M19.7778 4.22266L17.5558 6.25424M4.22217 4.22266L6.44418 6.25424M6.44434 17.5557L4.22211 19.7779M19.7778 19.7773L17.5558 17.5551" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg> Light Mode</button>
            <button class="theme-btn" onclick="setTheme('dark')">ðŸŒ™ Dark Mode</button>
            <button class="theme-btn" onclick="setTheme('system')">ðŸ’» System Default</button>
        </div>
        <button onclick="closeModal()" style="background:none; border:none; color:var(--text-muted); margin-top:15px; cursor:pointer;">Close</button>
    </div>
</div>

<script>
const modal = document.getElementById("themeModal");
const themeBtn = document.getElementById("theme-switcher");

// Open Modal
themeBtn.onclick = () => {
    modal.style.display = "flex";
};

// Close Modal
function closeModal() {
    modal.style.display = "none";
}

window.onclick = (event) => {
    if (event.target == modal) closeModal();
};

// Theme Logic
function setTheme(mode) {
    if (mode === 'system') {
        localStorage.removeItem('theme');
        applySystemTheme();
    } else {
        document.documentElement.setAttribute('data-theme', mode);
        localStorage.setItem('theme', mode);
    }
    closeModal();
}

function applySystemTheme() {
    if (!localStorage.getItem('theme')) {
        const isDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
    }
}

// Init on Load
const savedTheme = localStorage.getItem('theme');
if (savedTheme) {
    document.documentElement.setAttribute('data-theme', savedTheme);
} else {
    applySystemTheme();
}

// Watch System Change
window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", applySystemTheme);
</script>
