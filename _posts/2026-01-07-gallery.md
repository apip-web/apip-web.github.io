---
layout: post
title: "Gallery Keluarga"
author: Apip
tags: gallery
description: "Halaman berisi gallery keluarga"
---

<div class="gallery"></div>

<style>
.gallery {
  max-width: 1000px;
  margin: 40px auto;
  padding: 0 16px;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.gallery img {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,.15);
  cursor: pointer; /* untuk lightbox */
}
</style>

<script>
(function () {
  const CLOUD_NAME = 'dpawix5pp';
  const MAX_WIDTH = 1200;
  const TOTAL_IMAGES = 6;
  const gallery = document.querySelector('.gallery');

  // Buat 6 gambar otomatis
for (let i = 1; i <= TOTAL_IMAGES; i++) {
  const num = String(i).padStart(3, '0'); // 001, 002, ...
  
  // Buat elemen <img>
  const img = document.createElement('img');
  img.alt = `Gallery ${num}`;
  img.loading = 'lazy';
  img.dataset.cld = `gallery-${num}`; // untuk responsive JS
  
  // Buat <a> sebagai wrapper menuju gambar asli + lightbox
  const a = document.createElement('a');
  a.href = `https://res.cloudinary.com/dpawix5pp/image/upload/f_auto,q_auto/gallery-${num}.avif`; // full-size
  a.setAttribute('data', 'pop'); // lightbox
  a.appendChild(img);
  
  gallery.appendChild(a);
}

  function cloudinaryURL(publicId, width) {
    return `https://res.cloudinary.com/${CLOUD_NAME}/image/upload/f_auto,q_auto,w_${width}/${publicId}.avif`;
  }

  function updateImages() {
    document.querySelectorAll('.gallery img[data-cld]').forEach(img => {
      const colWidth = img.clientWidth || img.parentElement.clientWidth || 180;
      const dpr = window.devicePixelRatio || 1;
      const finalWidth = Math.min(Math.round(colWidth * dpr), MAX_WIDTH);
      const id = img.dataset.cld;
      img.src = cloudinaryURL(id, finalWidth);
    });
  }

  function debounce(fn, delay) {
    let t;
    return () => {
      clearTimeout(t);
      t = setTimeout(fn, delay);
    };
  }

  // Jalankan update setelah layout siap
  requestAnimationFrame(updateImages);
  window.addEventListener('resize', debounce(updateImages, 200));
})();
</script>
