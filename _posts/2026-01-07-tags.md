---
layout: post
title: Tags
permalink: /tags/
description: "Halaman filter tags"
---

<div class="tags-header" style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; margin-bottom: 30px;">
  <h1 id="tag-title" style="margin-top:0;">All Posts</h1>
  <button id="show-all" style="padding: 8px 16px; cursor: pointer; border-radius: 6px; border: 1px solid #3b82f6; background: transparent; color: #3b82f6;">Show All</button>
</div>

<script>
window.handleTags = function() {
  // Ambil hash terbaru dari URL
  const currentHash = decodeURIComponent(location.hash.replace('#', '')).trim();
  const title = document.getElementById('tag-title');
  const tagsPageUrl = '/tags/';

  console.log("Menjalankan filter untuk hash:", currentHash); // Untuk debug di console

  document.querySelectorAll('.post').forEach(post => {
    // 1. Abaikan elemen kontroler halaman tags itu sendiri
    const postUrl = post.dataset.url || "";
    if (postUrl === tagsPageUrl || postUrl.includes('/tags/')) {
      post.style.display = 'block';
      return;
    }

    // 2. Ambil data tags
    const rawTags = post.getAttribute('data-tags') || "";
    const tagsArray = rawTags ? rawTags.split(',').map(t => t.trim()) : [];
    
    // 3. Logika Filter Otomatis
    if (currentHash === '') {
      post.style.display = 'block';
    } else {
      const isMatch = tagsArray.includes(currentHash);
      post.style.display = isMatch ? 'block' : 'none';
    }
  });

  if (title) title.textContent = currentHash ? `Tag: #${currentHash}` : 'All Posts';
};

// 1. Tangani Klik (Show All & Tombol Tag)
document.addEventListener('click', (e) => {
  if (e.target.id === 'show-all') {
    location.hash = '';
  }
  const btn = e.target.closest('.tag');
  if (btn && btn.dataset.tag) {
    location.hash = btn.dataset.tag;
  }
});

// 2. Jalankan saat hash berubah
window.addEventListener('hashchange', window.handleTags);

// 3. JALANKAN OTOMATIS SAAT HALAMAN DIMUAT
// Kita gunakan interval kecil untuk memastikan elemen '.post' sudah dirender oleh SPA
let checkExist = setInterval(function() {
   if (document.querySelectorAll('.post').length > 0) {
      window.handleTags();
      clearInterval(checkExist);
   }
}, 100);

// Tambahan cadangan jika navigasi instan SPA
setTimeout(window.handleTags, 200);
</script>
