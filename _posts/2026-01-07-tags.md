---
layout: post
title: Tags
permalink: /tags/
description: "Halaman filter tags"
---

<div class="tags-header" style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; margin-bottom: 30px;">
  <h1 id="tag-title" style="margin-top:0;">All Posts</h1>
  <button id="show-all" style="padding: 8px 16px; cursor: pointer; border-radius: 6px; border: 1px solid #3b82f6; background: transparent; color: #3b82f6;">Show All</button>
</div>

<script>
window.handleTags = function() {
  const hash = decodeURIComponent(location.hash.replace('#', ''));
  const title = document.getElementById('tag-title');
  const tagsPageUrl = '/tags/';

  document.querySelectorAll('.post').forEach(post => {
    // 1. Lewati jika ini adalah kontainer tags itu sendiri
    if (post.dataset.url === tagsPageUrl || post.dataset.url?.includes('tags')) {
      post.style.display = 'block';
      return;
    }

    // 2. Ambil tags dengan aman (mencegah error 'split' of undefined)
    const rawTags = post.getAttribute('data-tags') || "";
    const tags = rawTags ? rawTags.split(',') : [];
    
    // 3. Logika Filter
    if (hash === '') {
      post.style.display = 'block';
    } else {
      // Cek apakah hash ada di dalam array tags
      const isMatch = tags.some(t => t.trim() === hash.trim());
      post.style.display = isMatch ? 'block' : 'none';
    }
  });

  if (title) title.textContent = hash ? `Tag: #${hash}` : 'All Posts';
};

// Gunakan Event Delegation agar lebih aman dari error null
document.addEventListener('click', (e) => {
  if (e.target.id === 'show-all') {
    location.hash = '';
  }
  
  const btn = e.target.closest('.tag');
  if (btn && btn.dataset.tag) {
    location.hash = btn.dataset.tag;
  }
});

window.addEventListener('hashchange', window.handleTags);

// Jalankan langsung dengan sedikit delay agar router selesai bekerja
setTimeout(window.handleTags, 50);
</script>
